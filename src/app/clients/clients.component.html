<div class="container">
	<h2 (click)="openClientFormModal()">Add New Client</h2>
	<form (ngSubmit)="onSubmit(clientForm)" #clientForm="ngForm">
		<div class="form-group">
			<label for="clientName">Client Name:</label>
			<input type="text" class="form-control" id="clientName" required [(ngModel)]="newClientName" name="clientName" />
		</div>
		<div class="form-group">
			<label for="contactEmail">Contact Email:</label>
			<input type="email" class="form-control" id="contactEmail" required [(ngModel)]="newClientEmail" name="contactEmail" #contactEmailModel="ngModel" [class.is-invalid]="contactEmailModel.invalid && (contactEmailModel.dirty || contactEmailModel.touched)" />
			<div *ngIf="contactEmailModel.invalid && (contactEmailModel.dirty || contactEmailModel.touched)" class="invalid-feedback">
				<div *ngIf="contactEmailModel.errors?.['required']">Email is required.</div>
				<div *ngIf="contactEmailModel.errors?.['email']">Invalid email format.</div>
			</div>
		</div>
		<div class="form-group">
			<label for="phoneNumber">Phone Number:</label>
			<input type="tel" class="form-control" id="phoneNumber" required [(ngModel)]="newClientPhone" name="phoneNumber" #phoneNumber="ngModel" [class.is-invalid]="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)" />
			<div *ngIf="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)" class="invalid-feedback">
				<div *ngIf="phoneNumber.errors?.['required']">Phone number is required.</div>
				<div *ngIf="phoneNumber.errors?.['pattern']">Invalid phone number format. Use numbers only.</div>
			</div>
		</div>
		<button type="submit" class="btn btn-primary mt-3">Add Client</button>
	</form>

	<hr />

	<h2>Clients List</h2>
	<div class="table-responsive">
		<table class="table table-hover">
			<thead>
				<tr>
					<th scope="col">Client Name</th>
					<th scope="col">Contact Email</th>
					<th scope="col">Phone Number</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr scope="row" *ngFor="let client of clients">
					<td>{{ client.name }}</td>
					<td>{{ client.email }}</td>
					<td>{{ client.phone }}</td>
					<td class="d-flex gap-2">
						<button mat-icon-button color="primary" aria-label="Edit icon button" class="btn btn-sm" (click)="editClient(client)"><mat-icon>edit</mat-icon></button>
						<button class="btn btn-sm btn-danger" (click)="deleteClient(client)">Delete</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>

	<!-- Form for updating client information -->
	<div *ngIf="selectedClient">
		<h2>Edit Client</h2>
		<form (ngSubmit)="updateClient()">
			<div class="form-group">
				<label for="editClientName">Client Name:</label>
				<input type="text" class="form-control" id="editClientName" required [(ngModel)]="selectedClient.name" name="editClientName" />
			</div>
			<div class="form-group">
				<label for="editContactEmail">Contact Email:</label>
				<input type="email" class="form-control" id="editContactEmail" required [(ngModel)]="selectedClient.email" name="editContactEmail" />
			</div>
			<div class="form-group">
				<label for="editPhoneNumber">Phone Number:</label>
				<input type="tel" class="form-control" id="editPhoneNumber" required [(ngModel)]="selectedClient.phone" name="editPhoneNumber" />
			</div>
			<div class="d-flex gap-2 mt-3">
				<button type="submit" class="btn btn-primary">Save Changes</button>
				<button type="button" class="btn btn-secondary" (click)="cancelEdit()">Cancel</button>
			</div>
		</form>
	</div>
</div>
